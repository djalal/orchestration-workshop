
class: title

# Nos premiers conteneurs

![Colorful plastic tubs](images/title-our-first-containers.jpg)

---

## Objectifs

√Ä la fin de cette le√ßon, vous aurez:

 * vu Docker en action;

 * d√©marr√© vos premiers conteneurs.

---

## Hello World

Depuis votre environnement Docker, lancez juste la commande suivante:

```bash
$ docker run busybox echo hello world
hello world
```

(Si votre installation Docker est vierge, quelques lignes en plus s'afficheront,
correspondant au t√©l√©chargement de l'image `busybox`.)

---

## C'√©tait notre premier conteneur!

* Nous avons utilis√© l'une des images les plus petites et simples: `busybox`.

* `busybox` est typiquement utilis√©e dans les syst√®mes embarqu√©s (t√©l√©phones, routeurs, etc.)

* Nous avons lanc√© un seul processus pour afficher `hello world`.

---

## Un conteneur plus utile

Lan√ßons un conteneur un peu plus excitant:

```bash
$ docker run -it ubuntu
root@04c0bb0a6c07:/#
```

* C'est un conteneur tout neuf.

* Il ex√©cute un syst√®me `ubuntu` basique et sans fioritures.

* `-it` est le raccourci pour `-i -it`.

  * `-i` dit √† Docker de nous connecter √† l'entr√©e du conteneur.

  * `-t` dit √† Docker que nous voulons un pseudo-terminal.

---

## Faire quelque chose dans notre conteneur

Essayez de lancer `figlet` dans notre conteneur.

```bash
root@04c0bb0a6c07:/# figlet hello
bash: figlet: command not found
```

D'accord, donc nous allons devoir l'installer.

---

## Installer un paquet dans notre conteneur

Nous voulons `figlet`, alors installons-le:

```bash
root@04c0bb0a6c07:/# apt-get update
...
Fetched 1514 kB in 14s (103 kB/s)
Reading package lists... Done
root@04c0bb0a6c07:/# apt-get install figlet
Reading package lists... Done
...
```

Une minute plus tard, `figlet` est install√©!

---

## Essayons de lancer notre programme fraichement install√©

Le programme `figlet` prend un message en param√®tre.

```bash
root@04c0bb0a6c07:/# figlet hello
 _          _ _       
| |__   ___| | | ___  
| '_ \ / _ \ | |/ _ \ 
| | | |  __/ | | (_) |
|_| |_|\___|_|_|\___/ 
```

Magnifique! .emoji[üòç]

---

class: in-person

## Compter les paquets dans le conteneur

V√©rifions maintenant combien de paquets y sont install√©s.

```bash
root@04c0bb0a6c07:/# dpkg -l | wc -l
190
```

* `dpkg -l` liste les paquets install√©s dans notre conteneur

* `wc -l` va les compter

Combien de paquets avons-nous sur notre h√¥te?

---

class: in-person

## Compter les paquets sur l'h√¥te?

Quittez le conteneur en vous d√©connectant du shell, comme d'habitude.

(i.e. avec `^D` ou `exit`)

```bash
root@04c0bb0a6c07:/# exit
```

Maintenant, essayons de:

* lancer `dpkg -l | wc -l`. Combien de paquets sont install√©s?

* lancer `figlet`. Est-ce que √ßa marche?

---

class: self-paced

## Comparaison du conteneur et de l'h√¥te

Sortez le conteneur en vous d√©connectant du _shell_, avec `^D` ou `exit`.

Maintenant essayez de lancer `figlet`. Est-ce que √ßa marche?

(Cela ne devrait pas; sauf si, pas co√Øncidence, vous utilisez une machine o√π figlet √©tait d√©j√† install√©.)

---

## H√¥te et conteneurs sont deux syst√®mes ind√©pendants

* Nous avons lanc√© un conteneur `ubuntu` sur un h√¥te Linux/Windows/macOS.

* Ils poss√®dent des paquets ind√©pendants et diff√©rents.

* Installer quelque chose sur l'h√¥te ne l'expose pas dans le conteneur.

* Et vice-versa.

* M√™me si l'h√¥te et le conteneur ont tous deux la m√™me distribution Linux.

* Nous pouvons lancer *n'importe quel conteneur* sur *n'importe quel h√¥te*.

  (Une exception: les conteneurs Windows ne peuvent tourner sur les machines Linux; par encore en tout cas.)

---

## O√π est notre conteneur?

* Notre conteneur est maintenant en √©tat *stopped*.

* Il existe encore sur le disque, mais toute ses ressources ont √©t√© lib√©r√©es.

* Nous verrons plus tard comment r√©cup√©rer ce conteneur.

---

## D√©marrer un autre conteneur

Et si nous d√©marrions un nouveau conteneur, pour y lancer √† nouveau `figlet`?
```bash
$ docker run -it ubuntu
root@b13c164401fb:/# figlet
bash: figlet: command not found
```

* Nous avons lanc√© un *tout nouveau conteneur*.

* Dans l'image de base Ubuntu utilis√© ci-dessus, `figlet` est absent.

* Nous verrons dans les chapitres suivants comment pr√©parer une image personnalis√©e avec `figlet`.
